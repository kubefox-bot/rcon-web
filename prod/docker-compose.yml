services:
  # üß† –ë—ç–∫–µ–Ω–¥ ‚Äî –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç RCON-–∫–æ–º–∞–Ω–¥—ã –∏ –æ–±—â–∞–µ—Ç—Å—è —Å CS2-—Å–µ—Ä–≤–µ—Ä–æ–º
  rcon-back:
    image: ghcr.io/xymox72/rcon-backend:latest     # üì¶ –≥–æ—Ç–æ–≤—ã–π –æ–±—Ä–∞–∑ –±—ç–∫–µ–Ω–¥–∞
    container_name: rcon-back                      # –∏–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–º–æ–∂–Ω–æ –Ω–µ –º–µ–Ω—è—Ç—å)
    expose:
      - "3000"                                      # –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø–æ—Ä—Ç (–ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ nginx)
    env_file:
      - .env                                        # üîê –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ .env (–Ω–∞–ø—Ä–∏–º–µ—Ä, ENCRYPTION_KEY)
    restart: unless-stopped                         # –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫, –µ—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —É–ø–∞–ª

  # üé® –§—Ä–æ–Ω—Ç–µ–Ω–¥ ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è RCON
  rcon-front:
    image: ghcr.io/xymox72/rcon-frontend:latest    # üì¶ –≥–æ—Ç–æ–≤—ã–π –æ–±—Ä–∞–∑ —Ñ—Ä–æ–Ω—Ç–∞
    container_name: rcon-front
    expose:
      - "4173"                                      # –ø–æ—Ä—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º —Ä–∞–±–æ—Ç–∞–µ—Ç —Ñ—Ä–æ–Ω—Ç –≤–Ω—É—Ç—Ä–∏ —Å–µ—Ç–∏
    env_file:
      - .env
    restart: unless-stopped

  # üåê Nginx ‚Äî –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç —Ç—Ä–∞—Ñ–∏–∫ –∫ —Ñ—Ä–æ–Ω—Ç—É –∏ API
  nginx:
    image: nginx:stable
    container_name: rcon-nginx
    ports:
      - "80:80"      # HTTP fallback
      - "3000:3000"   # üîì HTTP ‚Äî –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ (–º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å)
      - "8443:8443"   # üîí HTTPS ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –¥–æ—Å—Ç—É–ø –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    volumes:
      - ./nginx/default.conf:/etc/nginx/conf.d/default.conf   # üìÑ –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥ nginx
      - ./certs/cert.pem:/etc/nginx/certs/cert.pem:ro   # üîê TLS-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (–ø—É–±–ª–∏—á–Ω—ã–π)
      - ./certs/key.pem:/etc/nginx/certs/key.pem:ro     # üîê –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –∫ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—É
      - ./certs/cloudflare-origin-ca-root.pem:/etc/nginx/certs/cloudflare-origin-ca-root.pem:ro  # ‚úÖ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Cloudflare Origin CA)
    depends_on:
      - rcon-back
      - rcon-front
    restart: unless-stopped
